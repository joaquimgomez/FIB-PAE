<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>CVEModule Debugger</title>
  </head>

  <body>
    <h2>HCVEModule Debugger</h2>

    <p id="status">OpenCV.js is loading...</p>

    <div>
      <div class="inputoutput">
        <img id="imageSrc" alt="No Image" />
        <div class="caption">imageSrc <input type="file" id="fileInput" name="file"/>
        </div>
      </div>

      <div class="inputoutput">
        <canvas id="canvasOutput" ></canvas>
        <div class="caption">canvasOutput</div>
      </div>
    </div>
    
    <!-- SCRIPTS -->
    <!-- CVEModule load -->
    <script src="CVEModule.js" type="text/javascript"></script>

    <!-- Debugger Script -->
    <script type="text/javascript">
      let imgElement = document.getElementById('imageSrc');
      let inputElement = document.getElementById('fileInput');

      inputElement.addEventListener('change', (e) => {
        imgElement.src = URL.createObjectURL(e.target.files[0]);
      }, false);

      imgElement.onload = function() {
        let mat = cv.imread(imgElement);

        // Debug Computer Vision Engine Module
        let cve = new ComputerVisionEngine(imgElement);
        mat = cv.obtainResponseAreas();

        cv.imshow('canvasOutput', mat);

        mat.delete();
      };

      function onOpenCvReady() {
        document.getElementById('status').innerHTML = 'OpenCV.js is ready.';
      }
    </script>

    <!-- OpenCV library load-->
    <script async src="opencv.js" onload="onOpenCvReady();" type="text/javascript"></script>
  </body>
</html>
